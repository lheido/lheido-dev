---
export interface Props {
  title: string;
}

const { title } = Astro.props;
---

<section id="project-kitae">
  <img class="logo" src="/kitae.svg" alt="Kitae logo" />
  <h1><span>{title}</span></h1>
  <div class="content">
    <slot />
  </div>
</section>

<style is:global>
  :root {
    --project-kitae-sbh: 0%;
    --project-kitae-bh: 28%;
    --project-kitae-duration: 0.8s;
  }

  #project-kitae {
    @apply relative min-h-screen overflow-hidden bg-primary flex flex-col;
  }

  #project-kitae h1 {
    @apply relative font-bold opacity-0 text-primary;
    @apply flex justify-center items-center;
    @apply text-[25vw] md:text-[15vw] xl:text-[10vw] h-[--project-kitae-bh];
    transition: opacity var(--project-kitae-duration) ease;
  }

  #project-kitae.visible h1 {
    @apply opacity-100;
  }

  #project-kitae h1 span {
    @apply relative;
  }

  #project-kitae h1::before {
    @apply absolute w-full top-0 left-0 bg-neutral;
    @apply h-[--project-kitae-sbh];
    content: "";
    transition: height var(--project-kitae-duration) ease;
  }

  #project-kitae.visible h1::before {
    @apply h-full;
  }

  #project-kitae .logo {
    @apply max-md:hidden absolute bottom-0 right-0 opacity-0 translate-x-full translate-y-full;
    @apply w-[30vw] h-[30vw];
    transition: opacity var(--project-kitae-duration) ease,
      transform var(--project-kitae-duration) ease;
  }

  #project-kitae.visible .logo {
    @apply bottom-0 opacity-60 translate-x-1/4 translate-y-1/4;
  }

  #project-kitae .content {
    @apply relative flex-1 flex flex-col md:flex-row mx-auto gap-16 p-3 sm:p-4 md:p-8;
  }

  #project-kitae .content > :nth-child(1) {
    @apply opacity-0 translate-y-1/4;
    transition: opacity var(--project-kitae-duration) ease,
      transform var(--project-kitae-duration) ease;
  }

  #project-kitae.visible .content > :nth-child(1) {
    @apply opacity-100 translate-y-0;
  }

  #project-kitae .content > :nth-child(2) {
    @apply opacity-0 scale-75;
    transition: opacity var(--project-kitae-duration) ease,
      transform var(--project-kitae-duration) ease;
  }

  #project-kitae.visible .content > :nth-child(2) {
    @apply opacity-100 scale-100;
  }
</style>

<script>
  import { inView } from "motion";

  inView(
    "#project-kitae",
    () => {
      document
        .querySelector<HTMLDivElement>("#project-kitae")!
        .classList.add("visible");
    },
    { amount: 0.75 }
  );
</script>
